<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Letter Race</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: #87CEEB;
    font-family: Arial, sans-serif;
  }
  canvas {
    display: block;
    background: #555;
  }
  #ui {
    position: absolute;
    top: 10px;
    left: 10px;
    color: white;
    font-size: 20px;
  }
</style>
</head>
<body>

<div id="ui">Energie: <span id="energy">100</span></div>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let car = {
  x: canvas.width / 2 - 25,
  y: canvas.height - 120,
  width: 50,
  height: 80,
  speed: 7
};

let energy = 100;
let letters = "AEIOUMKSTP".split("");
let items = [];

function spawnItem() {
  items.push({
    x: Math.random() * (canvas.width - 40),
    y: -40,
    letter: letters[Math.floor(Math.random() * letters.length)],
    size: 40
  });
}

setInterval(spawnItem, 1500);

document.addEventListener("touchmove", e => {
  car.x = e.touches[0].clientX - car.width / 2;
});

document.addEventListener("mousemove", e => {
  car.x = e.clientX - car.width / 2;
});

function update() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  energy -= 0.03;
  document.getElementById("energy").textContent = Math.floor(energy);

  ctx.fillStyle = "red";
  ctx.fillRect(car.x, car.y, car.width, car.height);

  items.forEach((item, i) => {
    item.y += 3;

    ctx.fillStyle = "yellow";
    ctx.fillRect(item.x, item.y, item.size, item.size);

    ctx.fillStyle = "black";
    ctx.font = "24px Arial";
    ctx.fillText(item.letter, item.x + 12, item.y + 28);

    if (
      item.x < car.x + car.width &&
      item.x + item.size > car.x &&
      item.y < car.y + car.height &&
      item.y + item.size > car.y
    ) {
      energy += 10;
      items.splice(i,1);
    }

    if(item.y > canvas.height){
      items.splice(i,1);
    }
  });

  if(energy > 0){
    requestAnimationFrame(update);
  } else {
    ctx.fillStyle = "white";
    ctx.font = "40px Arial";
    ctx.fillText("Leeg! Probeer opnieuw", canvas.width/2 - 150, canvas.height/2);
  }
}

update();
</script>

</body>
</html>